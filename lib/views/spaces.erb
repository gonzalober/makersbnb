<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <base href="/">
  <link href="../../public/style.css" type="text/css">
</head>
<body>
  <%= flash[:notice] %>

  <% if !@user.nil? %>
  <form action='/sessions/<%= @user.id %>' method='POST' >
    <input type="hidden" name="_method" value='DELETE'>
    <input type='submit' value='Log out' name='Log out'>
  </form>
  <% else %>
  <a href="/users/new" name="Sign up">Sign up</a>
  <a href="/sessions/new" name="Log in">Log in</a>
  <% end %>


    <h1>Spaces available</h1>
    <% @spaces.each do |space| %>
    <div id="<%= space.id %>">
      <ul>
        <% @user = User.joins("INNER JOIN spaces ON spaces.user_id = users.id AND spaces.id = '#{space.id}'").first %>
        <li>Space description:<%= space.description %></li>
        <li>Location:<%= space.location %></li>
        <li>Email:<%= @user.email %></li>
        <li>Price:<%= space.price %></li>
      </ul>
      <form action='requests/new/<%= space.id %>' method='post'>
      <input type='submit' value='Rent me' name="rent-<%= space.id %>">
      </form>
    </div>
    <% end %>
  </body>
</html>

